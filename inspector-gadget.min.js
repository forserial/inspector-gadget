"use strict";angular.module("swd.inspector-gadget",[]),angular.module("swd.inspector-gadget").directive("inspectorGadget",function($compile){var getThenMute=function(element,selector,tag){var childElm=element.find(selector);if(1!==childElm.length){var errStr="inspector-gadget expecting exactly one "+selector+" 0 or >1 found";throw console.error(errStr),errStr}tag&&childElm[0].setAttribute("data-inspector-gadget-tag",tag);var childHtml=childElm[0].innerHTML;return childElm[0].hidden=!0,childHtml},collectPopoverAttrArgs=function(attrs){var bootstrArgs={};return angular.forEach(attrs,function(attrValue,attrName){("placement"===attrName||"animation"===attrName||"delay"===attrName||"container"===attrName||"viewport"===attrName)&&(bootstrArgs[attrName]=attrValue)}),bootstrArgs},uniqueDirective=1;return{restrict:"E",transclude:!0,template:'<div style="display: inline-block" class="anchored_div" ng-transclude></div>',link:function(scope,element,attrs){var anchoredDiv=element.find(".anchored_div"),titleHtml=getThenMute(element,"inspector-title",uniqueDirective++),contentHtml=getThenMute(element,"inspector-content"),popConfig=collectPopoverAttrArgs(attrs),timeoutObj=null;popConfig.html=!0,popConfig.title=function(){return titleHtml},popConfig.content=function(){return contentHtml},popConfig.trigger="manual",anchoredDiv.mouseenter(function(){anchoredDiv.popover("show");var popCont=$(".popover");console.log("compiling popover content: "+popCont.length+" timer:"+scope.timer),$compile(popCont.contents())(scope),scope.$apply()}),anchoredDiv.mouseleave(function(){console.log("mouseleave");var content=$(".popover");console.log("LEAVE LINK");var hoveringPopover=!1;content.mouseenter(function(){console.log("enter pop"),hoveringPopover=!0}),content.mouseleave(function(){console.log("leave pop"),hoveringPopover=!1});var hidePop=function(){hoveringPopover?timeoutObj=setTimeout(hidePop,300):anchoredDiv.popover("hide")};timeoutObj=setTimeout(hidePop,300)}),anchoredDiv.popover(popConfig),console.log("popover created: "+anchoredDiv.html())}}});